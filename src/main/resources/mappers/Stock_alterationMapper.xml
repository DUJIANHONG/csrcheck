<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.csr.csrcheck.mapper.Stock_alterationMapper">

    <select id="getlistPage" resultType="com.csr.csrcheck.pojo.Stock_alteration">
        SELECT st.*,sh.`shareholder_name`
        FROM stock_alteration st,shareholder sh
        <trim prefix="where" prefixOverrides="and | or">
            AND st.`investor_id`=sh.id
            <if test="shareholder_name!=null and shareholder_name!=''">
                AND sh.`shareholder_name` LIKE CONCAT('%',#{shareholder_name},'%')
            </if>
            <if test="change_time!=null and change_time!=''">
                AND st.`change_time`=#{change_time}
            </if>
            <if test="type!=null and type!=''">
                AND st.`type`=#{type}
            </if>
        </trim>
    </select>

</mapper>