<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.csr.csrcheck.mapper.ShareholderMapper">

    <select id="getListPage" resultType="com.csr.csrcheck.pojo.Shareholder">
        SELECT s.*,c.`company_name`
        FROM shareholder s,company c
        <trim prefix="where" prefixOverrides="and | or">
            and s.`company_id`=c.`id`
            <if test="shareholder_name!=null and shareholder_name!=''">
                AND s.shareholder_name LIKE CONCAT('%',#{shareholder_name},'%')
            </if>
            <if test="share_type!=null and share_type!=''">
                AND s.share_type LIKE CONCAT('%',#{share_type},'%')
            </if>
            <if test="company_name!=null and company_name!=''">
                AND c.`company_name` LIKE CONCAT('%',#{company_name},'%')
            </if>
        </trim>
    </select>

</mapper>