<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    <mapper namespace="com.csr.csrcheck.mapper.RecallMapper">
    <select id="getlist" resultType="com.csr.csrcheck.pojo.Product_recall">
        SELECT c.`company_name`,r.`keywords_remarks`,r.`recall_content`
        FROM product_recall r,product p,company c
        WHERE r.`product_id`=p.`product_id` AND p.`company_id`=c.`id`;
    </select>

    <select id="getListPage" resultType="com.csr.csrcheck.pojo.Product_recall">
    SELECT pr.*,c.`company_name`,p.`product_name`,z.`product_t_name`
    FROM product_recall pr,company c,product p,`z_product_type` z
    <trim prefix="where" prefixOverrides="and | or">
        and pr.`product_id`=p.`product_id`
        AND p.`company_id`=c.id
        AND p.`product_type_id`=z.`id`
        <if test="company_name!=null and company_name!=''">
            AND c.`company_name` LIKE CONCAT('%',#{company_name},'%')
        </if>
        <if test="product_name!=null and product_name!=''">
            AND p.`product_name` LIKE CONCAT('%',#{product_name},'%')
        </if>
        <if test="product_t_name!=null and product_t_name!=''">
            AND  z.`product_t_name` LIKE CONCAT('%',#{product_t_name},'%')
        </if>
    </trim>
    </select>
</mapper>
